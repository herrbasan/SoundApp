<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Monitoring - SoundApp</title>
    <link media="all" rel="stylesheet" type="text/css" href="../css/fonts.css">
    <link media="all" rel="stylesheet" type="text/css" href="../libs/nui/css/nui_main.css">
    <link media="all" rel="stylesheet" type="text/css" href="../libs/nui/css/nui_select.css">
    <link media="all" rel="stylesheet" type="text/css" href="../libs/nui/css/nui_app.css">
    <link rel="stylesheet" href="../css/window.css">
    <link rel="stylesheet" href="../css/monitoring.css">
</head>

<body class="dark no-select monitoring-window">
    <div class="nui-app">
        <div class="nui-title-bar window-chrome">
            <div class="title">
                <div class="nui-icon-container">
                    <i>visibility</i>
                </div>
                <div class="label">Monitor</div>
            </div>
            <div class="controls">
                <div class="nui-icon-container close"><i>close</i></div>
            </div>
        </div>

        <div class="content">
            <div class="monitoring-layout">
                <!-- Static Waveform -->
                <section class="panel waveform-panel">
                    <div class="panel-header">OVERVIEW</div>
                    <div class="canvas-container">
                        <canvas id="waveformCanvas"></canvas>
                        <div id="playhead" class="playhead"></div>
                    </div>
                </section>

                <div class="bottom-grid">
                    <!-- Left Column: Spectrum + Live Wave / Vectorscope -->
                    <div class="left-column">
                        <section class="panel spectrum-panel">
                            <div class="panel-header">SPECTRUM</div>
                            <div class="canvas-container">
                                <canvas id="spectrumCanvas"></canvas>
                            </div>
                        </section>
                        <div class="wave-scope-row">
                            <section class="panel livewave-panel">
                                <div class="panel-header">LIVE WAVE</div>
                                <div class="canvas-container">
                                    <canvas id="liveWaveCanvas"></canvas>
                                </div>
                            </section>
                            <section class="panel goniometer-panel">
                                <div class="panel-header">VECTORSCOPE</div>
                                <div class="canvas-container">
                                    <canvas id="gonioCanvas"></canvas>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- Right Column: Meters + Readouts + Correlation -->
                    <div class="right-column">
                        <!-- Correlation -->
                        <section class="panel correlation-panel">
                            <div class="panel-header">CORRELATION</div>
                            <div class="canvas-container">
                                <canvas id="corrCanvas"></canvas>
                                <div class="labels">
                                    <span>-1</span>
                                    <span>0</span>
                                    <span>+1</span>
                                </div>
                            </div>
                        </section>
                        <!-- Meters Section -->
                        <div class="meters-section">
                            <div class="panel-header">LOUDNESS</div>
                            <div class="meters-container">
                                <!-- LUFS Meter -->
                                <div class="meter-group lufs-group">
                                    <div class="meter-bar-container pro-meter">
                                        <div id="lufsBarS" class="meter-bar short-term"></div>
                                        <div id="lufsBarM" class="meter-bar momentary-cap"></div>
                                        <div id="lufsBarI" class="meter-bar integrated-line"></div>
                                        <div id="targetMarker" class="target-marker"></div>
                                    </div>
                                    <div class="meter-label">LUFS</div>
                                </div>
                                <!-- L/R Level Meters -->
                                <div class="meter-group level-group">
                                    <div class="meter-bar-container level-meter">
                                        <div id="levelBarL" class="meter-bar level-bar"></div>
                                        <div id="levelPeakL" class="meter-bar level-peak"></div>
                                    </div>
                                    <div class="meter-label">L</div>
                                </div>
                                <div class="meter-group level-group">
                                    <div class="meter-bar-container level-meter">
                                        <div id="levelBarR" class="meter-bar level-bar"></div>
                                        <div id="levelPeakR" class="meter-bar level-peak"></div>
                                    </div>
                                    <div class="meter-label">R</div>
                                </div>
                                <!-- Scale -->
                                <div class="meter-scale">
                                    <span>0</span>
                                    <span>-6</span>
                                    <span>-12</span>
                                    <span>-18</span>
                                    <span>-24</span>
                                    <span>-36</span>
                                    <span>-48</span>
                                </div>
                            </div>
                        </div>


                        <!-- Readouts -->
                        <div class="loudness-readouts">
                            <div class="target-selector">
                            <select id="targetPreset" class="nui-select">
                                <option value="none">None (disable loudness)</option>
                                <option value="-14">Streaming (-14 LUFS)</option>
                                <option value="-23" selected>EBU R128 (-23 LUFS)</option>
                                <option value="-9">CD/Club (-9 LUFS)</option>
                                <option value="-18">Podcast (-18 LUFS)</option>
                            </select>
                        </div>
                            <div class="readout-row main">
                                <div class="readout">
                                    <div class="label">SHORT</div>
                                    <div id="valS" class="value">---</div>
                                </div>
                                <div class="readout highlight">
                                    <div class="label">INT</div>
                                    <div id="valI" class="value">---</div>
                                </div>
                            </div>
                            <div class="readout-grid">
                                <div class="readout small">
                                    <div class="label">LRA</div>
                                    <div id="valLRA" class="value">0.0</div>
                                </div>
                                <div class="readout small">
                                    <div class="label">PLR</div>
                                    <div id="valPLR" class="value">0.0</div>
                                </div>
                                <div class="readout small">
                                    <div class="label">M MAX</div>
                                    <div id="valMMax" class="value">---</div>
                                </div>
                                <div class="readout small">
                                    <div class="label">PEAK</div>
                                    <div id="valPMax" class="value">---</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nui-status-bar window-chrome">
            <div id="file-info" class="file-info"></div>
        </div>
    </div>

    <script src="../js/shortcuts.js"></script>
    <script type="module">
        import ut from '../libs/nui/nui_ut.js';
        import nui from '../libs/nui/nui.js';
        window.ut = ut;
        window.nui = nui;
        // shortcuts is loaded via script tag above
    </script>
    <script src="../js/window-loader.js"></script>
    <script type="module" src="../js/monitoring/main.js"></script>
</body>

</html>