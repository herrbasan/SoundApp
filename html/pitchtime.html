<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<style>
		html, body { background-color: #323232 !important; }
		main { opacity: 0; }
		main.ready { opacity: 1; transition: opacity 0.1s ease-in; }
	</style>
	<title>Pitch & Time - SoundApp</title>
	<link media="all" rel="stylesheet" type="text/css" href="../css/fonts.css">
	<link media="all" rel="stylesheet" type="text/css" href="../libs/nui/css/nui_main.css">
	<link media="all" rel="stylesheet" type="text/css" href="../libs/nui/css/nui_app.css">
	<link rel="stylesheet" href="../css/window.css">
	<link rel="stylesheet" href="../css/pitchtime.css">
</head>

<body class="dark no-select" style="background-color:#323232">
	<div class="nui-app" style="background-color:#323232">
		<div class="nui-title-bar window-chrome">
			<div class="title">
				<div class="nui-icon-container">
					<i>graphic_eq</i>
				</div>
				<div class="label">Pitch & Time</div>
			</div>
			<div class="controls">
				<div class="nui-icon-container close"><i>close</i></div>
			</div>
		</div>
		<div class="content">
			<main>
				<div id="content" class="pitchtime-root">
					<div class="controls-section">
						<div class="transport-controls">
							<div id="btn_play" class="icon-btn">
								<svg class="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
								<svg class="pause-icon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
							</div>
							<div id="btn_stop" class="icon-btn">
								<svg viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg>
							</div>
							<div id="btn_loop" class="icon-btn">
								<svg viewBox="0 0 24 24"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></svg>
							</div>
						</div>

						<div class="transport">
							<div id="seek_bar" class="bar"><div class="inner"></div></div>
							<div class="time">
								<div class="current" id="current_time">0:00</div>
								<div class="mid"></div>
								<div class="duration" id="total_time">0:00</div>
							</div>
						</div>
					</div>

					<div class="manipulation-section">
						<div class="param-group">
							<label>Pitch Shift</label>
							<div class="value-display">
								<span id="pitch_value">0</span>
								<span class="unit">semitones</span>
							</div>
							<div id="pitch_slider" class="param-slider">
								<div class="track"></div>
								<div class="handle"></div>
								<div class="center-mark"></div>
							</div>
							<div class="range-labels">
								<span>-12</span>
								<span>0</span>
								<span>+12</span>
							</div>
						</div>

						<div class="param-group tempo-group">
							<label>Time Stretch <span class="experimental-badge">(experimental)</span></label>
							<div class="value-display">
								<span id="tempo_value">100</span>
								<span class="unit">%</span>
							</div>
							<div id="tempo_slider" class="param-slider">
								<div class="track"></div>
								<div class="handle"></div>
								<div class="center-mark"></div>
							</div>
							<div class="range-labels">
								<span>50%</span>
								<span>100%</span>
								<span>200%</span>
							</div>
							<div class="tempo-warning">WASM buffer limitation - may cause audio artifacts</div>
						</div>

						<div class="quality-controls">
							<label class="checkbox-label">
								<input type="checkbox" id="hq_mode" checked>
								<span>High Quality Mode (256 samples, slower)</span>
							</label>
						</div>

						<div class="action-buttons">
							<button id="btn_reset_params" class="action-btn">Reset Parameters</button>
						</div>
					</div>

					<div class="info-section">
						<div id="file_info" class="file-info">
							<div class="info-line">
								<span class="label">File:</span>
								<span id="info_filename" class="value">No file loaded</span>
							</div>
							<div class="info-line">
								<span class="label">Sample Rate:</span>
								<span id="info_samplerate" class="value">48000 Hz</span>
							</div>
							<div class="info-line">
								<span class="label">Engine:</span>
								<span id="info_engine" class="value">WASM Rubberband</span>
							</div>
						</div>
					</div>

					<div id="error_display" class="error-display" style="display: none;">
						<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
						<span id="error_message">Error message</span>
					</div>

					<div id="loading_overlay" class="loading-overlay" style="display: none;">
						<div class="loading-message">Loading audio...</div>
					</div>
				</div>
			</main>
		</div>
	</div>

	<script type="module" src="../js/window-loader.js"></script>
	<script type="module" src="../js/pitchtime/main.js"></script>
</body>

</html>
